<!DOCTYPE html>
<html lang=zh>
<head><meta name="generator" content="Hexo 3.9.0">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="$CF1396E-Distance Matching$这种极易停止撕烤的题先考虑有无解。即求答案范围。 $dist(x, y) = dis_x + dis_y - 2 dis_{lca(x, y)}$ 最小化 lca $dis$ 之和，尽量在浅的点配完 ！根据某经典模型，选重心可以配完并且 lca 都是重心。同理求得 $minans$。 maxans = \sum dis_i = \sum [i">
<meta property="og:type" content="article">
<meta property="og:title" content="CF 快乐板刷之路">
<meta property="og:url" content="http://yoursite.com/2021/07/09/CF 快乐板刷之路/index.html">
<meta property="og:site_name" content="imily&#39;s notebook">
<meta property="og:description" content="$CF1396E-Distance Matching$这种极易停止撕烤的题先考虑有无解。即求答案范围。 $dist(x, y) = dis_x + dis_y - 2 dis_{lca(x, y)}$ 最小化 lca $dis$ 之和，尽量在浅的点配完 ！根据某经典模型，选重心可以配完并且 lca 都是重心。同理求得 $minans$。 maxans = \sum dis_i = \sum [i">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2021-07-29T06:35:54.431Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CF 快乐板刷之路">
<meta name="twitter:description" content="$CF1396E-Distance Matching$这种极易停止撕烤的题先考虑有无解。即求答案范围。 $dist(x, y) = dis_x + dis_y - 2 dis_{lca(x, y)}$ 最小化 lca $dis$ 之和，尽量在浅的点配完 ！根据某经典模型，选重心可以配完并且 lca 都是重心。同理求得 $minans$。 maxans = \sum dis_i = \sum [i">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon-cactus.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>CF 快乐板刷之路</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss --><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    
    
</head>

<body>
    
      <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/posts/">归档</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2021/07/20/UNR 5 题解/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2021/05/31/【计划】21May 训练日志（真·退役冲刺实录）/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2021/07/09/CF 快乐板刷之路/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2021/07/09/CF 快乐板刷之路/&text=CF 快乐板刷之路"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2021/07/09/CF 快乐板刷之路/&title=CF 快乐板刷之路"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2021/07/09/CF 快乐板刷之路/&is_video=false&description=CF 快乐板刷之路"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=CF 快乐板刷之路&body=Check out this article: http://yoursite.com/2021/07/09/CF 快乐板刷之路/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2021/07/09/CF 快乐板刷之路/&title=CF 快乐板刷之路"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2021/07/09/CF 快乐板刷之路/&title=CF 快乐板刷之路"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2021/07/09/CF 快乐板刷之路/&title=CF 快乐板刷之路"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2021/07/09/CF 快乐板刷之路/&title=CF 快乐板刷之路"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2021/07/09/CF 快乐板刷之路/&name=CF 快乐板刷之路&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#CF1396E-Distance-Matching"><span class="toc-number">1.</span> <span class="toc-text">$CF1396E-Distance Matching$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF1322E-Median-Mountain-Range"><span class="toc-number">2.</span> <span class="toc-text">$CF1322E-Median Mountain Range$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF1481F-AB-Tree"><span class="toc-number">3.</span> <span class="toc-text">$CF1481F-AB Tree$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF827F-Dirty-Arkady’s-Kitchen"><span class="toc-number">4.</span> <span class="toc-text">$CF827F-Dirty Arkady’s Kitchen$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF1550D-Excellent-Arrays"><span class="toc-number">5.</span> <span class="toc-text">$CF1550D-Excellent Arrays$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF1550E-Stringforces"><span class="toc-number">6.</span> <span class="toc-text">$CF1550E-Stringforces$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF1550F-Jumping-Around"><span class="toc-number">7.</span> <span class="toc-text">$CF1550F-Jumping Around$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF283E"><span class="toc-number">8.</span> <span class="toc-text">$CF283E$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF1400F"><span class="toc-number">9.</span> <span class="toc-text">$CF1400F$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF1528D"><span class="toc-number">10.</span> <span class="toc-text">$CF1528D$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF587F"><span class="toc-number">11.</span> <span class="toc-text">$CF587F$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF603E"><span class="toc-number">12.</span> <span class="toc-text">$CF603E$</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#可能要暂时断更了，没有显著成效，noi-同步赛打得稀烂"><span class="toc-number"></span> <span class="toc-text">可能要暂时断更了，没有显著成效，noi 同步赛打得稀烂</span></a>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        CF 快乐板刷之路
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">imily's notebook</span>
      </span>
      
    <div class="postdate">
        <time datetime="2021-07-09T10:11:40.000Z" itemprop="datePublished">2021-07-09</time>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h3 id="CF1396E-Distance-Matching"><a href="#CF1396E-Distance-Matching" class="headerlink" title="$CF1396E-Distance Matching$"></a><a href="https://www.luogu.com.cn/problem/CF1396E" target="_blank" rel="noopener">$CF1396E-Distance Matching$</a></h3><p>这种极易停止撕烤的题先考虑有无解。即求答案范围。</p>
<p>$dist(x, y) = dis_x + dis_y - 2 dis_{lca(x, y)}$</p>
<p>最小化 lca $dis$ 之和，尽量在浅的点配完</p>
<p>！根据某经典模型，选重心可以配完并且 lca 都是重心。同理求得 $minans$。</p>
<script type="math/tex; mode=display">maxans = \sum dis_i = \sum [i \neq root] sz_i</script><script type="math/tex; mode=display">minans = \sum [i \neq root] (sz_i \mod 2)</script><p>$maxans - k$ 显然必须是 $2$ 的倍数。否则设 $rest = (maxans - k) / 2$，显然可以通过不断选大小最大的子树的一对点配对使得 $rest$ 变小。<del>模拟？😅</del></p>
<p>可以将某些非叶子节点变成 lca。具体来说：</p>
<ul>
<li>$rest \geq$ 大小最大的子树深度 $d$ 时，选该子树最深的那对兄弟或父亲，$rest -= d - 1$ (I)</li>
<li>否则令深度 $rest$ 的点为 lca (II)</li>
</ul>
<p>细节：</p>
<ul>
<li>set 维护重心所有子树的大小和 id，方便找最大子树</li>
<li>对每个子树开一个 set 维护子树中点的深度和 id，方便找最深点</li>
<li>只有一次是 II 情况，其余都是 I，I 显然每次删的都是两个叶子的父亲或一个叶子和它的父亲，所以点匹配掉要记得<strong>将父亲度数减一</strong>（还要从父亲的叶子集合里删掉，但是想要快速删除就要多个 log，还是懒惰删除更香一点，即遇见时删除），父亲成为叶子就把父亲从备选深度集合里踢掉。</li>
</ul>
<p><a href="https://codeforces.com/problemset/submission/1396/122195667" target="_blank" rel="noopener">$Code$</a></p>
<h3 id="CF1322E-Median-Mountain-Range"><a href="#CF1322E-Median-Mountain-Range" class="headerlink" title="$CF1322E-Median Mountain Range$"></a><a href="https://www.luogu.com.cn/problem/CF1322E" target="_blank" rel="noopener">$CF1322E-Median Mountain Range$</a></h3><p>中位数问题，想到「01 序列」基本这题就只剩代码难度了。</p>
<p>我们把长度 $&gt; 1$ 的 0 和 1 称为 0 段和 1 段，0、1 交错出现的称为 01 段。<br>显然 0 段和 1 段是稳定的，<br>01 交错出现部分每次操作会两边各缩进去一个单位。</p>
<p>拓展，$\leq x$ 为 1，$&gt; x$ 为 0。某位取值为 $a$，当且仅当 $x = a$ 时该位置的终态改变。</p>
<p>从小到大枚举 $x$。操作次数 $=$ 所有 $x$ 的操作次数 $max$，因为实际操作序列肯定存在最后一步，当 $x =$ 最后一步的中位数时取到 $max$。</p>
<p>细节：</p>
<p>每次 0 -&gt; 1 可能会让 0 段和 01 段变为 01 段和 1 段。每次操作只会至多出现一个 01 段需要赋值。</p>
<ul>
<li>并查集维护同色块，set 维护同色<strong>对</strong>的位置（这俩方便确定 01 交错段的端点坐标）</li>
<li>set 维护 0 的位置，防止对 01 交错段中的 0 重复赋值（赋值指 $ans = x$）。</li>
</ul>
<p><a href="https://codeforces.com/contest/1322/submission/122324706" target="_blank" rel="noopener">$Code$</a></p>
<h3 id="CF1481F-AB-Tree"><a href="#CF1481F-AB-Tree" class="headerlink" title="$CF1481F-AB Tree$"></a><a href="https://www.luogu.com.cn/problem/CF1481F" target="_blank" rel="noopener">$CF1481F-AB Tree$</a></h3><p>考虑枚举答案。设最大深度为 $l$，那么答案下界为 $l$，当且仅当每个深度颜色相同。</p>
<p>背包？物品种类 $O(\sqrt{n})$ 级别，也就是说 $O(n \sqrt{n})$ 的复杂度即可判断答案能否为 $l$。$dp[x, i]$ 表示前 $x$ 种物品填了 $i$ 个 a，bitset + 多重背包</p>
<p>然后呢？</p>
<p>官解告诉我们上界为 $l + 1$。证明见如下构造过程，有点脑筋急转弯的感jio：</p>
<p>将点分为叶子节点和非叶子节点，非叶子节点个数 $\leq \frac{n}{2}$ 个，<strong>每层</strong>非叶子节点必然可以同色，考虑从上往下填色，每层的非叶子节点先填同一种颜色，然后同层的叶子节点尽量填该层非叶子节点的颜色，若填完了就填另一种。</p>
<p><a href="https://codeforces.com/problemset/submission/1481/122535450" target="_blank" rel="noopener">$Code$</a></p>
<h3 id="CF827F-Dirty-Arkady’s-Kitchen"><a href="#CF827F-Dirty-Arkady’s-Kitchen" class="headerlink" title="$CF827F-Dirty Arkady’s Kitchen$"></a><a href="https://www.luogu.com.cn/problem/CF827F" target="_blank" rel="noopener">$CF827F-Dirty Arkady’s Kitchen$</a></h3><p>策略是反复横跳。设「最小时刻」的 dp 状态是不对的，因为如果来的边 ban 掉，又没有邻边存在，就会挂。</p>
<p>按出现时间从小到大加边，堆维护，$f[x, 0/1]$ 表示在偶/奇时刻到达 $x$ 点的最大时刻，那么加入的边出现时间只要 $\leq f[x, 0/1]$ 就可以拓展，否则 $&gt; f[x, 0/1]$ 就先放在 $x$ 的 vector 里，等到什么时候 $f[x, 0/1]$ 更新了才拓展（更新 $f[x, 0/1]$ 一定是之后的边的 $r$，一定大于当前边的 $l$，所以一定可以拓展）。因为边有序，vector 也有序。显然你不用考虑删边了。</p>
<p>这样一条边最多被考虑两次，复杂度 $O(nlogn)$。</p>
<p><a href="https://codeforces.com/problemset/submission/827/122544419" target="_blank" rel="noopener">$Code$</a></p>
<h3 id="CF1550D-Excellent-Arrays"><a href="#CF1550D-Excellent-Arrays" class="headerlink" title="$CF1550D-Excellent Arrays$"></a><a href="https://codeforces.com/contest/1550/problem/D" target="_blank" rel="noopener">$CF1550D-Excellent Arrays$</a></h3><p>卡点很奇怪的一道题（？</p>
<p>设 $k_i = a_i - i$，那么 $k_i = -k_j$ 的对贡献 $1$，也就是说按 $|k_i|$ 划分，每个部分内部贡献的和最大</p>
<p><del>然后我到这儿就卡住了</del></p>
<p>显然可以划分为一个集合，其中一半 $+k$，一半 $-k$，因此 $F(a) = (n/2)^2$</p>
<p>不同 $k$ 的贡献计算方式不同。</p>
<ul>
<li><p>$k \leq min(1 - l, r - n)$：偶长度序列答案为 $\binom{n}{n/2}$，奇长度序列答案为 $\binom{n}{n/2} + \binom{n}{(n/2) + 1}$，就考虑选了哪些为 $+k$</p>
</li>
<li><p>$k &gt; min(1 - l, r - n)$：设 $lf = max(1, l + k) + 1$, $rg = min(n, r - k) - 1$<br>$i \in [1, lf)$ 只能选 $+k$, $i \in (rg, n]$ 只能选 $-k$。稍微推一下得到，偶长度序列答案为 $\binom{rg - lf + 1}{(n/2) - lf + 1}$, 奇长度序列答案为 $\binom{rg - lf + 1}{(n/2) - lf + 1} + \binom{rg - lf + 1}{(n/2) + 1 - lf + 1}$</p>
<p>这部分复杂度是合法 $k$ 的个数，是多少呢？$k$ 每 $+1$，$lf++$、$rg—$，直到 $rg - lf + 1 \leq 0$，一共是 $O(n)$ 个 $k$。</p>
</li>
</ul>
<p><a href="https://codeforces.com/contest/1550/submission/122626451" target="_blank" rel="noopener">$Code$</a></p>
<h3 id="CF1550E-Stringforces"><a href="#CF1550E-Stringforces" class="headerlink" title="$CF1550E-Stringforces$"></a><a href="https://codeforces.com/contest/1550/problem/E" target="_blank" rel="noopener">$CF1550E-Stringforces$</a></h3><p>满足二分性。check 考虑贪心的把大小为 $lim$（二分值）的块尽量往左放，看能否 fit</p>
<p>每种字符都要出现，于是状压 dp 加块顺序。预处理每个位置往后每种字符最近的长度合法的连续段的结束位置。<br>若当前位置 $i$ 可以放某种颜色的块，当且仅当其他所有颜色上一次出现位置都 $\geq i + lim$</p>
<p><a href="https://codeforces.com/contest/1550/submission/122627687" target="_blank" rel="noopener">$Code$</a></p>
<h3 id="CF1550F-Jumping-Around"><a href="#CF1550F-Jumping-Around" class="headerlink" title="$CF1550F-Jumping Around$"></a><a href="https://codeforces.com/contest/1550/problem/F" target="_blank" rel="noopener">$CF1550F-Jumping Around$</a></h3><p>喵题（但似乎没有很大的难点）</p>
<p>首先肯定不能每次判断。由于能跳到每个位置的最小 $k$ 具有单调性，考虑预处理每个位置被到达的最小 $k$。</p>
<p>考虑两两连边，边权 $w$ 为互相到达的最小 $k$，显然 $w = | d - | a_u - a_v | |$</p>
<p>那么两个点可互达的最小 $k$ 就可以用 kruskal 重构树算，其实就是建 MST 啦</p>
<p>怎么建 MST 啊？这是完全图！kruskal 暴毙，prim $n^2$，而 boruvka 可以，因为这里距离的计算方式比较特殊</p>
<p>用 set 维护所有点的坐标。处理当前块时，将 set 中当前块的坐标清出去，这样复杂度才对。$O(nlog^2n)$。</p>
<p><a href="https://codeforces.com/contest/1550/submission/122630068" target="_blank" rel="noopener">$Code$</a></p>
<h3 id="CF283E"><a href="#CF283E" class="headerlink" title="$CF283E$"></a><a href="https://www.luogu.com.cn/problem/CF283E" target="_blank" rel="noopener">$CF283E$</a></h3><p>不合法的三元组一定是存在一头牛可以打败另外两头</p>
<p>$d_i$ 表示第 $i$ 头牛能打败 $d_i$ 头牛</p>
<p>$ans = \binom{n}{3} - \sum\limits_{i = 1}^n \binom{d_i}{2}$</p>
<p>$d_i$ 的区间一定包含 $i$，因此将区间按左右端点升序排列，依次反转区间（SGT 维护 tag），扫到 $i$ 为左端点时统计 $[i + 1, n]$ 中被反转了奇数次的和 $[1, i - 1]$ 中被反转了偶数次的。</p>
<h3 id="CF1400F"><a href="#CF1400F" class="headerlink" title="$CF1400F$"></a><a href="https://codeforces.com/problemset/problem/1400/F" target="_blank" rel="noopener">$CF1400F$</a></h3><p>盲猜 x-prime 区间很少，跑一跑</p>
<p><del>咦为什么我 num = 19 只有 870？题解说 2400</del></p>
<p>诶不管了，总之就是 dp, $dp[i, j]$ 表示考虑前 $i$ 个字符在 AC 自动机状态 $j$ 的最少删除个数</p>
<p><a href="https://codeforces.com/problemset/submission/1400/123013668" target="_blank" rel="noopener">$Code$</a></p>
<h3 id="CF1528D"><a href="#CF1528D" class="headerlink" title="$CF1528D$"></a><a href="https://www.luogu.com.cn/problem/CF1528D" target="_blank" rel="noopener">$CF1528D$</a></h3><p>形式化：$u \rightarrow v$，等一秒就变成 $u \rightarrow v + 1$，其实可以看作 $v \rightarrow v + 1$。连边跑 dij 即可。</p>
<p>注意 dij 扩展到的点，最短路已经确定，要根据最短路的 dis 确定当前边<strong>真正</strong>的终点。</p>
<p>细节：由于是个边数 $n^2$ 级别的稠密图，dij 不用堆会更快哦。</p>
<p><a href="https://codeforces.com/problemset/submission/1528/123016914" target="_blank" rel="noopener">$Code$</a></p>
<h3 id="CF587F"><a href="#CF587F" class="headerlink" title="$CF587F$"></a><a href="https://www.luogu.com.cn/problem/CF587F" target="_blank" rel="noopener">$CF587F$</a></h3><p><a href="https://www.luogu.com.cn/problem/CF547E" target="_blank" rel="noopener">$CF547E$</a> 的孪生姊妹。</p>
<p>哦说到那题，一种做法是离线询问、建立 AC 自动机并用 BIT 维护 fail 树，另一种做法是直接把串拼起来，就变成询问一个区间内某串出现次数的 SAM + 线段树合并板子题。</p>
<p>再来看这题，似乎直接思考没有靠谱做法？</p>
<p>暴力做法是在 ACAM 上跑 $s_k$，统计 fail 树上到根路径上是 $s_{l \cdots r}$ 的结尾的点的个数。</p>
<p>考虑根号分治：</p>
<ul>
<li>长度 $&lt; \sqrt{n}$ 的用暴力做法。</li>
<li>长度 $&gt; \sqrt{n}$ 的只有 $\sqrt{n}$ 个串，可以预处理每个串在它里面出现的次数。</li>
</ul>
<h3 id="CF603E"><a href="#CF603E" class="headerlink" title="$CF603E$"></a><a href="https://www.luogu.com.cn/problem/CF603E" target="_blank" rel="noopener">$CF603E$</a></h3><p>假设你已经知道了判定方法，然后来个删边并查集 + cdq 分治即可。</p>
<p>现在问题是，判定方法/充要条件是啥？<strong>每个连通块点数为奇</strong>。</p>
<p>考虑加入一条边会使得奇度点个数 $+2$，不变或 $-2$，必要条件是每个连通块点数都为偶。</p>
<p>充分性考虑构造一个偶数个点的连通块的合法边集：选个生成树，从下往上删即可！！</p>
<p>于是你就可以将边升序排序后 cdq 啦！</p>
<p>当前时间 $[l, r]$，边权 $[x, y]$</p>
<p>假设当前已经加入了时间在 $[1, l)$ 且边权在 $[1, x)$ 的所有边</p>
<p>只要求出 $ans_{mid}$ 就可以递归到 $(l, mid - 1, ans_{mid}, y)$ 和 $(mid + 1, r, x, ans_{mid})$</p>
<p>先将 $[l, mid]$ 中边权 $[1, x)$ 的所有边加入，然后按边权从小往大加到所有连通块点数都为偶为止。</p>
<p>$O(mlogmlogn)$，每条边被加入删除它的深度次，$logn$ 是删边并查集的复杂度。</p>
<hr>
<h1 id="可能要暂时断更了，没有显著成效，noi-同步赛打得稀烂"><a href="#可能要暂时断更了，没有显著成效，noi-同步赛打得稀烂" class="headerlink" title="可能要暂时断更了，没有显著成效，noi 同步赛打得稀烂"></a><em>可能要暂时断更了，没有显著成效，noi 同步赛打得稀烂</em></h1><hr>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/posts/">归档</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#CF1396E-Distance-Matching"><span class="toc-number">1.</span> <span class="toc-text">$CF1396E-Distance Matching$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF1322E-Median-Mountain-Range"><span class="toc-number">2.</span> <span class="toc-text">$CF1322E-Median Mountain Range$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF1481F-AB-Tree"><span class="toc-number">3.</span> <span class="toc-text">$CF1481F-AB Tree$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF827F-Dirty-Arkady’s-Kitchen"><span class="toc-number">4.</span> <span class="toc-text">$CF827F-Dirty Arkady’s Kitchen$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF1550D-Excellent-Arrays"><span class="toc-number">5.</span> <span class="toc-text">$CF1550D-Excellent Arrays$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF1550E-Stringforces"><span class="toc-number">6.</span> <span class="toc-text">$CF1550E-Stringforces$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF1550F-Jumping-Around"><span class="toc-number">7.</span> <span class="toc-text">$CF1550F-Jumping Around$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF283E"><span class="toc-number">8.</span> <span class="toc-text">$CF283E$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF1400F"><span class="toc-number">9.</span> <span class="toc-text">$CF1400F$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF1528D"><span class="toc-number">10.</span> <span class="toc-text">$CF1528D$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF587F"><span class="toc-number">11.</span> <span class="toc-text">$CF587F$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CF603E"><span class="toc-number">12.</span> <span class="toc-text">$CF603E$</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#可能要暂时断更了，没有显著成效，noi-同步赛打得稀烂"><span class="toc-number"></span> <span class="toc-text">可能要暂时断更了，没有显著成效，noi 同步赛打得稀烂</span></a>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2021/07/09/CF 快乐板刷之路/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2021/07/09/CF 快乐板刷之路/&text=CF 快乐板刷之路"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2021/07/09/CF 快乐板刷之路/&title=CF 快乐板刷之路"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2021/07/09/CF 快乐板刷之路/&is_video=false&description=CF 快乐板刷之路"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=CF 快乐板刷之路&body=Check out this article: http://yoursite.com/2021/07/09/CF 快乐板刷之路/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2021/07/09/CF 快乐板刷之路/&title=CF 快乐板刷之路"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2021/07/09/CF 快乐板刷之路/&title=CF 快乐板刷之路"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2021/07/09/CF 快乐板刷之路/&title=CF 快乐板刷之路"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2021/07/09/CF 快乐板刷之路/&title=CF 快乐板刷之路"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2021/07/09/CF 快乐板刷之路/&name=CF 快乐板刷之路&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2021 imily
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/posts/">归档</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>


    <!-- Google Analytics -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-37473492-6', 'auto');
        ga('send', 'pageview');
    </script>



