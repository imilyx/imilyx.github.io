<!DOCTYPE html>
<html lang=zh>
<head><meta name="generator" content="Hexo 3.9.0">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="链接 寿司餐厅$mx^2 + cx$ 解读：吃一个 $x$ 代价 $x$，吃过 $x$ 代价 $mx^2$ 看题：  如果选了 $d_{i, j}$，则必须选择 $d_{l, r} (i \leq l \leq r \leq j)$，必须选择 $d_{k, k} ( i \leq k \leq r )$  可以在 $d_{k, k}$ 处减去代价 $a_k$  选了 $d_{k, k}$ 就必须选">
<meta property="og:type" content="article">
<meta property="og:title" content="六省联考2017 乱写">
<meta property="og:url" content="http://yoursite.com/2021/03/12/六省联考2017 乱写/index.html">
<meta property="og:site_name" content="imily&#39;s notebook">
<meta property="og:description" content="链接 寿司餐厅$mx^2 + cx$ 解读：吃一个 $x$ 代价 $x$，吃过 $x$ 代价 $mx^2$ 看题：  如果选了 $d_{i, j}$，则必须选择 $d_{l, r} (i \leq l \leq r \leq j)$，必须选择 $d_{k, k} ( i \leq k \leq r )$  可以在 $d_{k, k}$ 处减去代价 $a_k$  选了 $d_{k, k}$ 就必须选">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2021-03-23T06:54:24.118Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="六省联考2017 乱写">
<meta name="twitter:description" content="链接 寿司餐厅$mx^2 + cx$ 解读：吃一个 $x$ 代价 $x$，吃过 $x$ 代价 $mx^2$ 看题：  如果选了 $d_{i, j}$，则必须选择 $d_{l, r} (i \leq l \leq r \leq j)$，必须选择 $d_{k, k} ( i \leq k \leq r )$  可以在 $d_{k, k}$ 处减去代价 $a_k$  选了 $d_{k, k}$ 就必须选">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon-cactus.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>六省联考2017 乱写</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss --><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    
    
</head>

<body>
    
      <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/posts/">归档</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/friends/">友人帐</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2021/03/14/AGC 012 题解/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2021/03/08/联合省选2020 乱写/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2021/03/12/六省联考2017 乱写/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2021/03/12/六省联考2017 乱写/&text=六省联考2017 乱写"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2021/03/12/六省联考2017 乱写/&title=六省联考2017 乱写"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2021/03/12/六省联考2017 乱写/&is_video=false&description=六省联考2017 乱写"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=六省联考2017 乱写&body=Check out this article: http://yoursite.com/2021/03/12/六省联考2017 乱写/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2021/03/12/六省联考2017 乱写/&title=六省联考2017 乱写"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2021/03/12/六省联考2017 乱写/&title=六省联考2017 乱写"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2021/03/12/六省联考2017 乱写/&title=六省联考2017 乱写"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2021/03/12/六省联考2017 乱写/&title=六省联考2017 乱写"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2021/03/12/六省联考2017 乱写/&name=六省联考2017 乱写&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#寿司餐厅"><span class="toc-number">1.</span> <span class="toc-text">寿司餐厅</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#期末考试"><span class="toc-number">2.</span> <span class="toc-text">期末考试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#组合数问题"><span class="toc-number">3.</span> <span class="toc-text">组合数问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#摧毁树状图"><span class="toc-number">4.</span> <span class="toc-text">摧毁树状图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#分手是祝愿"><span class="toc-number">5.</span> <span class="toc-text">分手是祝愿</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#相逢是问候"><span class="toc-number">6.</span> <span class="toc-text">相逢是问候</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        六省联考2017 乱写
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">imily's notebook</span>
      </span>
      
    <div class="postdate">
        <time datetime="2021-03-12T12:17:40.000Z" itemprop="datePublished">2021-03-12</time>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p><a href="https://www.luogu.com.cn/problem/list?keyword=%E5%85%AD%E7%9C%81%E8%81%94%E8%80%83&amp;page=1" target="_blank" rel="noopener">链接</a></p>
<h2 id="寿司餐厅"><a href="#寿司餐厅" class="headerlink" title="寿司餐厅"></a>寿司餐厅</h2><p>$mx^2 + cx$ 解读：吃一个 $x$ 代价 $x$，吃过 $x$ 代价 $mx^2$</p>
<p>看题：</p>
<ul>
<li><p>如果选了 $d_{i, j}$，则必须选择 $d_{l, r} (i \leq l \leq r \leq j)$，必须选择 $d_{k, k} ( i \leq k \leq r )$</p>
</li>
<li><p>可以在 $d_{k, k}$ 处减去代价 $a_k$</p>
</li>
<li><p>选了 $d_{k, k}$ 就必须选择物品 $a_k$，代价 $m * a_k^2$</p>
</li>
</ul>
<p>至此已经转化为最大权闭合子图模型。</p>
<p>关于建图：怎么选所有子区间？从 $d_{i, j}$ 向 $d_{i + 1, j}$ 和 $d_{i, j - 1}$ 连 $\infty$ 边表示强制选。</p>
<h2 id="期末考试"><a href="#期末考试" class="headerlink" title="期末考试"></a>期末考试</h2><p>大水<del>桶</del>题，枚举最晚时间，前后缀算一算。卡 long long，<strong>从小到大枚举最晚时间</strong>，如果仅仅是同学的不满意度已经大于历史的 $ans$ 最小值就 break。</p>
<h2 id="组合数问题"><a href="#组合数问题" class="headerlink" title="组合数问题"></a>组合数问题</h2><p>组合意义（这个真的不阴间）：从 $nk$ 个物品中选 $t (t \mod k = r)$ 个物品的方案数。</p>
<p>朴素 dp：$f_{i, j}$ 表示到第 $i$ 个物品，选的物品个数 $\mod k = j$ 的方案数。转移就是循环的形式。</p>
<p>注意到 $K$ 和 $r$ 很小，矩乘即可。</p>
<p>另一种做法：$\sum\limits_{i \mod k = r} \binom{nk}{i} = \sum\limits_{i \mod k = r} [x^i] (1 + x)^{nk}$，暴力做多项式快速幂取模即可。</p>
<h2 id="摧毁树状图"><a href="#摧毁树状图" class="headerlink" title="摧毁树状图"></a>摧毁树状图</h2><p>暴力拼起来有 84！<del>考场上谁 tm 去写正解啊</del></p>
<p>只有两种情况：相交与不相交。</p>
<p>设计状态的时候考虑两条路径“生长”的过程。状态如下：</p>
<ul>
<li>$dp_{x, 0}$：选一条上端点为 $x$ 的路径的最大连通块数</li>
<li>$dp_{x, 1}$：选一条 $x$ 子树里不经过 $x$ 的路径的最大连通块数（注意这时 $x$ 和 $x$ 的父亲会构成新连通块）</li>
<li>$dp_{x, 2}$：选一条 $x$ 子树里经过 $x$ 的路径的最大连通块数</li>
<li>$dp_{x, 3}$：选一条上端点为 $x$ 的路径，和一条 $x$ 子树里的路径（两者边不相交）的最大连通块数</li>
</ul>
<p><strong>注意：这里的最大连通块数都仅指「$x$ 子树内」。</strong></p>
<p>转移比较常规，细节有点多，建议看代码：<a href="https://loj.ac/s/1098042" target="_blank" rel="noopener">点我</a></p>
<h2 id="分手是祝愿"><a href="#分手是祝愿" class="headerlink" title="分手是祝愿"></a>分手是祝愿</h2><p>首先按键的方案唯一——从后往前就能唯一确定。$50$ 分就直接从后往前按。</p>
<p>考虑正解：除开这些必须按的键，如果按了其他的键 <strong>就得按同一个键按回来</strong>。</p>
<p>根据期望线性性，将 dp 状态设为 $f[i]$ 表示从 $i$ 个必选的键转移到 $i - 1$ 个必选的键的期望操作次数。</p>
<script type="math/tex; mode=display">f[i] = \frac{i}{n} + \frac{n - i}{n}(1 + f[i] + f[i + 1])</script><p>第一项表示选了一个必选的，一次就到 $i - 1$ 去了；第二项表示选了一个其他的，就得 $f[i + 1]$ 次按回来，再 $f[i]$ 次按到 $i - 1$ 去。解一个一元一次方程就好了（</p>
<p>很神仙！</p>
<h2 id="相逢是问候"><a href="#相逢是问候" class="headerlink" title="相逢是问候"></a>相逢是问候</h2><p>就剩一道了！加油 xml！</p>
<p>做过的套路题，套了数论皮子的暴力题。</p>
<p>扩展欧拉定理：$a ^ b \mod{p} =$</p>
<ul>
<li><p>$b &lt; \varphi(p)$：$a^{b}$</p>
</li>
<li><p>$b \geq \varphi(p)$：$a^{b \% \varphi(p) + \varphi(p)}$</p>
</li>
</ul>
<p>这题本质是个套娃，$c^{c^{c^{\cdots}}} \mod{p} = c^{c^{c^{\cdots}} \mod{ \varphi(p) } + \varphi(p)（加不加 \varphi(p) 要按上面那样分类讨论） } \mod{p}$，一直套娃下去，模数变成 $\varphi(\varphi(\varphi(\cdots\varphi(p)))) = 1$，并且只要 $log$ 层。</p>
<p>所以<del>像 segment tree beats 那样</del>维护线段树每个区间最小修改次数，如果超过 $log$ 就不改了因为值再也不会变了，否则就递归下去。复杂度三只 $log$：线段树一只，扩展欧拉定理一只，快速幂一只，而快速幂那只可以预处理优化掉所以最后是两只 $log$。</p>
<p><a href="https://loj.ac/s/1098152" target="_blank" rel="noopener">$Code$</a></p>
<hr>
<p>总结：「寿司餐厅」如果再熟练一些就能自己做出来了……感觉对模型的转化还不够。<del>待会去做 CF 题</del>「摧毁树状图」恶心人的树形 dp，口区口区。「分手是祝愿」还是挺有意思的，我喜欢它！</p>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/posts/">归档</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/friends/">友人帐</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#寿司餐厅"><span class="toc-number">1.</span> <span class="toc-text">寿司餐厅</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#期末考试"><span class="toc-number">2.</span> <span class="toc-text">期末考试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#组合数问题"><span class="toc-number">3.</span> <span class="toc-text">组合数问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#摧毁树状图"><span class="toc-number">4.</span> <span class="toc-text">摧毁树状图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#分手是祝愿"><span class="toc-number">5.</span> <span class="toc-text">分手是祝愿</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#相逢是问候"><span class="toc-number">6.</span> <span class="toc-text">相逢是问候</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2021/03/12/六省联考2017 乱写/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2021/03/12/六省联考2017 乱写/&text=六省联考2017 乱写"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2021/03/12/六省联考2017 乱写/&title=六省联考2017 乱写"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2021/03/12/六省联考2017 乱写/&is_video=false&description=六省联考2017 乱写"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=六省联考2017 乱写&body=Check out this article: http://yoursite.com/2021/03/12/六省联考2017 乱写/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2021/03/12/六省联考2017 乱写/&title=六省联考2017 乱写"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2021/03/12/六省联考2017 乱写/&title=六省联考2017 乱写"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2021/03/12/六省联考2017 乱写/&title=六省联考2017 乱写"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2021/03/12/六省联考2017 乱写/&title=六省联考2017 乱写"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2021/03/12/六省联考2017 乱写/&name=六省联考2017 乱写&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2021 imily
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/posts/">归档</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/friends/">友人帐</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </nav>
  </div>
</footer><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>


    <!-- Google Analytics -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-37473492-6', 'auto');
        ga('send', 'pageview');
    </script>



